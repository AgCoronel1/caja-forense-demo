<div class="dialog-header">
  <h2>
    {{ data ? 'Editar Producto' : 'Nuevo Producto' }}
  </h2>
</div>

<div class="form-container">
  <form [formGroup]="form" (ngSubmit)="save()">
    
    <!-- Sección principal -->
    <div class="form-section">
      <div class="section-title">Información Básica</div>
      
      <div class="form-row">
        <mat-form-field appearance="outline" class="half-width">
          <mat-label>Nombre del producto</mat-label>
          <input matInput formControlName="title">
          <mat-hint>Nombre único del producto</mat-hint>
          <mat-error *ngIf="form.get('title')?.hasError('required')">
            El nombre es obligatorio
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="half-width">
          <mat-label>Precio</mat-label>
          <input matInput type="number" formControlName="price" min="0" step="0.01">
          <span matPrefix class="ms-3 mb-3">$ &nbsp;</span>
          <mat-hint>Precio en dólares</mat-hint>
          <mat-error *ngIf="form.get('price')?.hasError('required')">
            El precio es obligatorio
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row full-width">
        <mat-form-field appearance="outline">
          <mat-label>Descripción</mat-label>
          <textarea matInput formControlName="description"
                    placeholder="Describe las características del producto"
                    rows="4"></textarea>
          <mat-hint>Máximo 500 caracteres</mat-hint>
          <mat-error *ngIf="form.get('description')?.hasError('required')">
            La descripción es obligatoria
          </mat-error>
        </mat-form-field>
      </div>
      <div class="form-row half-width">
        <mat-form-field appearance="outline">
          <mat-label>Stock</mat-label>
          <input matInput type="number" formControlName="stock" min="0">
          <mat-hint>Cantidad disponible</mat-hint>
        </mat-form-field>
      </div>
    </div>

    <!-- Sección adicional -->
    <div class="additional-fields">
      <div class="section-title">Información Adicional</div>
      
      <div class="form-row triple">

        <mat-form-field appearance="outline" class="third-width">
          <mat-label>Categoría</mat-label>
          <mat-select formControlName="category">
            <mat-option value="electronics">Electrónicos</mat-option>
            <mat-option value="clothing">Ropa</mat-option>
            <mat-option value="home">Hogar</mat-option>
            <mat-option value="sports">Deportes</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="third-width">
          <mat-label>Marca</mat-label>
          <input matInput formControlName="brand">
          <mat-hint>Marca del producto</mat-hint>
        </mat-form-field>
      </div>

      <div class="form-row triple">
        <mat-form-field appearance="outline" class="third-width">
          <mat-label>Descuento (%)</mat-label>
          <input matInput type="number" formControlName="discountPercentage" min="0" max="100" step="0.1">
        </mat-form-field>

        <mat-form-field appearance="outline" class="third-width">
          <mat-label>Rating</mat-label>
          <input matInput type="number" formControlName="rating" min="0" max="5" step="0.1">
        </mat-form-field>

        <mat-form-field appearance="outline" class="third-width">
          <mat-label>Imagen principal (thumbnail)</mat-label>
          <input matInput formControlName="thumbnail" placeholder="URL de la imagen principal">
        </mat-form-field>
      </div>

      <div class="form-row full-width">
        <mat-form-field appearance="outline">
          <mat-label>Imágenes adicionales (URLs separadas por coma)</mat-label>
          <textarea matInput formControlName="images" placeholder="Ej: https://... , https://..."></textarea>
        </mat-form-field>
      </div>
    </div>

    <div class="dialog-actions">
      <button mat-stroked-button type="button" (click)="cancel()">Cancelar</button>
      <button mat-flat-button type="submit" color="primary" [disabled]="form.invalid">
        <span style="color: white;">{{ data ? 'Actualizar Producto' : 'Crear Producto' }}</span>
      </button>
    </div>
  </form>
</div>
